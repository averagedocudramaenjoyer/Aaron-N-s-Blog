[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this blog"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Aaron N’s Blog",
    "section": "",
    "text": "Week One\n\n\n\n\n\n\n\n\n\n\n\nMay 23, 2023\n\n\nAaron Null\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/Aaron-Null-DSPG-Week-2/Week-One.html",
    "href": "posts/Aaron-Null-DSPG-Week-2/Week-One.html",
    "title": "Blog Post - Week One",
    "section": "",
    "text": "We took some time to explore the TidyCensus package yesterday. Here are some interesting plots:\n\n#install.packages(\"tidycensus\")\n#install.packages(\"tidyverse\")\nlibrary(tidycensus)\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n\nlibrary(stringr)\nlibrary(patchwork)\n\n\n#Vacancy for county\n\nCounties_Occupancy <- get_decennial(\n  geography = \"county\",\n  year = 2020,\n  state = \"IA\",\n  variables = c(vacant_households = \"H1_003N\",\n                total_households = \"H1_001N\"),\n  output = \"wide\"\n)\n\nGetting data from the 2020 decennial Census\n\n\nUsing the PL 94-171 Redistricting Data summary file\n\n\nNote: 2020 decennial Census data use differential privacy, a technique that\nintroduces errors into data to preserve respondent confidentiality.\nℹ Small counts should be interpreted with caution.\nℹ See https://www.census.gov/library/fact-sheets/2021/protecting-the-confidentiality-of-the-2020-census-redistricting-data.html for additional guidance.\nThis message is displayed once per session.\n\nIowa_Counties <- Counties_Occupancy %>%\n  filter(GEOID %in% c(19019, 19037, 19075, 19169))\n\n\n#Vacancy for cities\n\nCities_Occupancy <- get_decennial(\n  geography = \"place\",\n  year = 2020,\n  state = \"IA\",\n  variables = c(vacant_households = \"H1_003N\",\n                total_households = \"H1_001N\"),\n  output = \"wide\"\n)\n\nGetting data from the 2020 decennial Census\n\n\nUsing the PL 94-171 Redistricting Data summary file\n\nIowa_Cities <- Cities_Occupancy %>%\n  filter(GEOID %in% c(\"1938100\", \"1956100\", \"1933195\", \"1973515\"))\n\n# Combine\n\nIowa_Places <- rbind(Iowa_Cities, Iowa_Counties)\n\n\n# Adding percent columns\n\nIowa_Places <- Iowa_Places %>%\n  mutate(percent = 100 * vacant_households/total_households,\n         occupied_percent = 100 - percent)\n\nIowa_Places <- Iowa_Places %>%\n  mutate(total_percent = 100)\n\n# Plot\n\nIowa_Places %>%\n  ggplot(aes(x = NAME)) +\n  geom_col(aes(y = total_percent, fill = \"Occupied\"), width = 0.8) + \n  geom_col(aes(y = percent, fill = \"Vacant\"), width = 0.8) +\n  coord_flip()\n\n\n\n\nThis is a graph representing the percentage of vacant housing units per location for both the counties and their respective cities. Slater City has the lowest percentage of vacancies while New Hampton City has the highest.\nI then looked at median earnings within the last 12 months:\n\n#API Call\n\nmedian_earnings <- get_acs(geography = \"county\",\n                       variables = \"B08521_001\",\n                       state = \"IA\",\n                       county = c(\"Buchanan County\", \"Chickasaw County\", \"Grundy County\", \"Story County\"),\n                       year = 2021,\n                       survey = \"acs5\")\n\nGetting data from the 2017-2021 5-year ACS\n\nmedian_earnings <- get_acs(geography = \"county\",\n                       variables = \"B08521_001\",\n                       state = \"IA\",\n                       county = c(\"Buchanan County\", \"Chickasaw County\", \"Grundy County\", \"Story County\"),\n                       year = 2021,\n                       survey = \"acs5\")\n\nGetting data from the 2017-2021 5-year ACS\n\nmedian_earnings\n\n# A tibble: 4 × 5\n  GEOID NAME                   variable   estimate   moe\n  <chr> <chr>                  <chr>         <dbl> <dbl>\n1 19019 Buchanan County, Iowa  B08521_001    35810  1743\n2 19037 Chickasaw County, Iowa B08521_001    38946  3114\n3 19075 Grundy County, Iowa    B08521_001    43307  1966\n4 19169 Story County, Iowa     B08521_001    38214  1577\n\n\n\nmedian_earnings %>%\n  ggplot(aes(x = NAME, y = estimate)) +\n  geom_bar(stat = \"identity\") +\n  geom_errorbar(aes(ymin = estimate - moe, ymax = estimate + moe), width = 0.2, position =    position_dodge(0.9)) +\n  ylab(\"Median Earnings\") + \n  xlab(\"County\")\n\n\n\n\nThis graph represents the median of individuals’ earnings within the last 12 months by county. Grundy County reports the highest while Buchanan County reports the lowest.\nThen I looked at the different languages spoken in each county:\n\n# List of language variables (provided by Chris Seeger)\n\nlangList = c(\"Speak only English\" = \"C16001_002\",   \"Spanish\" = \"C16001_003\",   \"French, Haitian, or Cajun\" = \"C16001_006\",   \"German or other West Germanic languages\" = \"C16001_009\",   \"Russian, Polish, or other Slavic languages\" = \"C16001_012\",   \"Other Indo-European languages\" = \"C16001_015\",   \"Korean\" = \"C16001_018\",   \"Chinese (incl. Mandarin, Cantonese)\" = \"C16001_021\",   \"Vietnamese\" = \"C16001_024\",   \"Tagalog (incl. Filipino)\" = \"C16001_027\",   \"Other Asian and Pacific Island languages\" = \"C16001_030\",   \"Arabic\" = \"C16001_033\",   \"Other and unspecified languages\" = \"C16001_036\")\n\n#API Call\n\nlang <- get_acs(geography = \"county\",\n                       variables = langList,\n                       state = \"IA\",\n                       year = 2021,\n                       survey = \"acs5\")\n\nGetting data from the 2017-2021 5-year ACS\n\n# Subsetting data with string detection\n\nlang_counties <- lang %>%\n  filter(str_detect(NAME, \"Buchanan|Chickasaw|Grundy|Story\"))\n\n\n# Plots\nplot_1 <- lang_counties %>%\n  ggplot(aes(x = NAME, y = estimate, fill = variable)) + \n  geom_bar(stat = \"identity\", position = \"fill\") + \n  xlab(\"County\") +\n  ylab(\"Languages\") +\n  coord_flip()\n\nplot_2 <- lang_counties %>%\n  filter(variable != \"Speak only English\") %>%\n  ggplot(aes(x = NAME, y = estimate, fill = variable)) + \n  geom_bar(stat = \"identity\", position = \"fill\") + \n  xlab(\"County\") +\n  ylab(\"Language (Other Than English)\") +\n  coord_flip()\n\nplot_1 \n\n\n\n\nThis plot shows the distribution of languages spoken in the four counties with English included.\n\nplot_2\n\n\n\n\nThis plot shows the language distribution excluding English. There is a great degree of variation from county to county in regards to the distribution of spoken languages other than English (which comprises a vast majority in all of the counties).\nSimilar plots were made for race/ethnicity.\n\n# Created variable list\n\nraceList = c(\"White\" = \"P1_003N\", \"Black\" = \"P1_004N\", \"American Indian/Alaskan Native\" = \"P1_005N\", \"Asian\" = \"P1_006N\", \"Native Hawaiian/Pacific Islander\" = \"P1_007N\", \"Other\" = \"P1_008N\")\n\nrace_counties <- get_decennial(geography = \"county\",\n                       variables = raceList,\n                       state = \"IA\",\n                       county = c(\"Buchanan County\", \"Chickasaw County\", \"Grundy County\", \"Story County\"),\n                       year = 2020)\n\nGetting data from the 2020 decennial Census\n\n\nUsing the PL 94-171 Redistricting Data summary file\n\n\n\nplot_1 <- race_counties %>%\n  ggplot(aes(x = NAME, y = value, fill = variable)) + \n  geom_bar(stat = \"identity\", position = \"fill\") + \n  xlab(\"County\") +\n  ylab(\"Race/Ethnicity\") +\n  coord_flip()\n\nplot_2 <- race_counties %>%\n  filter(variable != \"White\") %>%\n  ggplot(aes(x = NAME, y = value, fill = variable)) + \n  geom_bar(stat = \"identity\", position = \"fill\") + \n  xlab(\"County\") +\n  ylab(\"Race/Ethnicity (Other than White)\") +\n  coord_flip()\n\nplot_1\n\n\n\n\nThis is a plot of the distribution of race/ethnicity for each of the 4 counties.\n\nplot_2\n\n\n\n\nThis is a plot of of the distribution of racial minorities in each county.\nIt was also important to find the Hispanic/Latino population figures for each county, as it wasn’t clear how that group was being incorporated into the data used in the plots above.\n\n# API Call\nhispanic_counties_wide <- get_decennial(geography = \"county\",\n                       variables = c(\"Hispanic/Latino\" = \"P2_002N\", \"Not Hispanic/Latino\" = \"P2_003N\"),\n                       state = \"IA\",\n                       county = c(\"Buchanan County\", \"Chickasaw County\", \"Grundy County\", \"Story County\"),\n                       year = 2020,\n                       output = \"wide\")\n\nGetting data from the 2020 decennial Census\n\n\nUsing the PL 94-171 Redistricting Data summary file\n\n# Table\nhispanic_counties_wide <- hispanic_counties_wide %>%\n  mutate(percentage = 100 * `Hispanic/Latino`/`Not Hispanic/Latino`)\n\nhispanic_counties_wide\n\n# A tibble: 4 × 5\n  GEOID NAME                  `Hispanic/Latino` `Not Hispanic/Latino` percentage\n  <chr> <chr>                             <dbl>                 <dbl>      <dbl>\n1 19019 Buchanan County, Iowa               338                 20227       1.67\n2 19037 Chickasaw County, Io…               481                 11531       4.17\n3 19075 Grundy County, Iowa                 145                 12184       1.19\n4 19169 Story County, Iowa                 5032                 93505       5.38\n\n\nThis table shows the reported Hispanic/Latino population for 2020 for each of the 4 counties, along with percentages.\nI decided to turn my attention to Iowa at large and look at poverty rates.\n\n# API Call\npoverty <- get_acs(geography = \"block group\",\n                       variables = (\"Poverty_income_individuals\" = \"B17021_002\"),\n                       state = \"IA\",\n                       year = 2021,\n                       survey = \"acs5\",\n                       geometry = TRUE)\n\nGetting data from the 2017-2021 5-year ACS\n\n\nDownloading feature geometry from the Census website.  To cache shapefiles for use in future sessions, set `options(tigris_use_cache = TRUE)`.\n\n\n\n  |                                                                            \n  |                                                                      |   0%\n  |                                                                            \n  |=                                                                     |   2%\n  |                                                                            \n  |==                                                                    |   3%\n  |                                                                            \n  |===                                                                   |   5%\n  |                                                                            \n  |=====                                                                 |   6%\n  |                                                                            \n  |=====                                                                 |   7%\n  |                                                                            \n  |======                                                                |   9%\n  |                                                                            \n  |=======                                                               |  10%\n  |                                                                            \n  |========                                                              |  11%\n  |                                                                            \n  |=========                                                             |  12%\n  |                                                                            \n  |==========                                                            |  14%\n  |                                                                            \n  |===========                                                           |  15%\n  |                                                                            \n  |===========                                                           |  16%\n  |                                                                            \n  |============                                                          |  18%\n  |                                                                            \n  |=============                                                         |  19%\n  |                                                                            \n  |==============                                                        |  20%\n  |                                                                            \n  |===============                                                       |  22%\n  |                                                                            \n  |================                                                      |  23%\n  |                                                                            \n  |=================                                                     |  24%\n  |                                                                            \n  |=================                                                     |  25%\n  |                                                                            \n  |==================                                                    |  26%\n  |                                                                            \n  |===================                                                   |  28%\n  |                                                                            \n  |====================                                                  |  28%\n  |                                                                            \n  |=====================                                                 |  30%\n  |                                                                            \n  |======================                                                |  32%\n  |                                                                            \n  |=======================                                               |  32%\n  |                                                                            \n  |========================                                              |  34%\n  |                                                                            \n  |=========================                                             |  35%\n  |                                                                            \n  |=========================                                             |  36%\n  |                                                                            \n  |==========================                                            |  37%\n  |                                                                            \n  |=============================                                         |  41%\n  |                                                                            \n  |==============================                                        |  42%\n  |                                                                            \n  |===============================                                       |  45%\n  |                                                                            \n  |================================                                      |  46%\n  |                                                                            \n  |=================================                                     |  48%\n  |                                                                            \n  |==================================                                    |  48%\n  |                                                                            \n  |==================================                                    |  49%\n  |                                                                            \n  |====================================                                  |  51%\n  |                                                                            \n  |=====================================                                 |  52%\n  |                                                                            \n  |=====================================                                 |  53%\n  |                                                                            \n  |======================================                                |  55%\n  |                                                                            \n  |========================================                              |  57%\n  |                                                                            \n  |=========================================                             |  59%\n  |                                                                            \n  |===========================================                           |  61%\n  |                                                                            \n  |===========================================                           |  62%\n  |                                                                            \n  |============================================                          |  63%\n  |                                                                            \n  |=============================================                         |  65%\n  |                                                                            \n  |==============================================                        |  65%\n  |                                                                            \n  |===============================================                       |  67%\n  |                                                                            \n  |================================================                      |  69%\n  |                                                                            \n  |=================================================                     |  69%\n  |                                                                            \n  |==================================================                    |  71%\n  |                                                                            \n  |===================================================                   |  72%\n  |                                                                            \n  |===================================================                   |  73%\n  |                                                                            \n  |====================================================                  |  74%\n  |                                                                            \n  |=====================================================                 |  75%\n  |                                                                            \n  |======================================================                |  77%\n  |                                                                            \n  |======================================================                |  78%\n  |                                                                            \n  |=========================================================             |  82%\n  |                                                                            \n  |==========================================================            |  83%\n  |                                                                            \n  |===========================================================           |  85%\n  |                                                                            \n  |============================================================          |  85%\n  |                                                                            \n  |============================================================          |  86%\n  |                                                                            \n  |=============================================================         |  88%\n  |                                                                            \n  |===============================================================       |  89%\n  |                                                                            \n  |===============================================================       |  90%\n  |                                                                            \n  |================================================================      |  92%\n  |                                                                            \n  |==================================================================    |  94%\n  |                                                                            \n  |===================================================================   |  96%\n  |                                                                            \n  |====================================================================  |  97%\n  |                                                                            \n  |===================================================================== |  99%\n  |                                                                            \n  |======================================================================| 100%\n\n# Plot\nggplot(poverty) +\n  geom_sf(aes(fill = estimate)) + # Fill the counties by population density\n  scale_fill_distiller(palette = \"YlOrBr\") + # Use a color-blind friendly palette\n  labs(title = \"Individuals Below the Poverty Line in Iowa\",\n       subtitle = \"Source: American Community Survey 2021\",\n       fill = \"People per Block Group\") + # Add labels\n  theme_minimal()\n\n\n\n\nThis is a plot of the number of individuals per block group who earned low enough wages over 12 months to place them below the poverty line in 2021. The rate differs more or less uniformly around the state save for a few key regions.\nFinally, I looked at the reported mode of transport to work for each of the four counties. A similar stacked proportional bar graph was made to the ones for language and race above.\n\n# Compiled variable list for mode of transport\ntransportList = c(\"Automobile\" = \"B08006_002\",\"Bus\" = \"B08006_009\", \"Subway/Elevated Rail\" = \"B08006_010\", \"Train\" = \"B08006_011\",\"Light Rail\" = \"B08006_012\",\"Ferryboat\" = \"B08006_013\", \"Bicycle\" = \"B08006_014\",\"Walked\" = \"B08006_015\", \"Taxi/Motorcycle/Other\" = \"B08006_016\")\n\n# API Call\n\ntransport_counties <- get_acs(geography = \"tract\",\n                       variables = transportList,\n                       state = \"IA\",\n                       year = 2021,\n                       survey = \"acs5\",\n                       geometry = TRUE)\n\nGetting data from the 2017-2021 5-year ACS\n\n\nDownloading feature geometry from the Census website.  To cache shapefiles for use in future sessions, set `options(tigris_use_cache = TRUE)`.\n\n\n\n  |                                                                            \n  |                                                                      |   0%\n  |                                                                            \n  |==                                                                    |   3%\n  |                                                                            \n  |=====                                                                 |   6%\n  |                                                                            \n  |======                                                                |   9%\n  |                                                                            \n  |=========                                                             |  13%\n  |                                                                            \n  |============                                                          |  17%\n  |                                                                            \n  |==============                                                        |  19%\n  |                                                                            \n  |================                                                      |  23%\n  |                                                                            \n  |==================                                                    |  25%\n  |                                                                            \n  |====================                                                  |  28%\n  |                                                                            \n  |=====================                                                 |  30%\n  |                                                                            \n  |=======================                                               |  32%\n  |                                                                            \n  |=======================                                               |  33%\n  |                                                                            \n  |=========================                                             |  36%\n  |                                                                            \n  |===========================                                           |  38%\n  |                                                                            \n  |============================                                          |  40%\n  |                                                                            \n  |==============================                                        |  42%\n  |                                                                            \n  |================================                                      |  45%\n  |                                                                            \n  |=================================                                     |  46%\n  |                                                                            \n  |====================================                                  |  52%\n  |                                                                            \n  |=======================================                               |  56%\n  |                                                                            \n  |=========================================                             |  59%\n  |                                                                            \n  |===========================================                           |  61%\n  |                                                                            \n  |============================================                          |  63%\n  |                                                                            \n  |=============================================                         |  65%\n  |                                                                            \n  |===============================================                       |  67%\n  |                                                                            \n  |=================================================                     |  70%\n  |                                                                            \n  |====================================================                  |  74%\n  |                                                                            \n  |========================================================              |  80%\n  |                                                                            \n  |=========================================================             |  81%\n  |                                                                            \n  |===============================================================       |  91%\n  |                                                                            \n  |====================================================================  |  97%\n  |                                                                            \n  |======================================================================| 100%\n\n# Subset for relevant counties using str_detect()\ntransport_counties2 <- transport_counties %>%\n  filter(str_detect(NAME, \"Buchanan|Chickasaw|Grundy|Story\"))\n\n# Mutating 'county' column and labeling for each tract observation\ntransport_small <- transport_counties2 %>%\n  mutate(county = ifelse(str_detect(NAME, \"Buchanan\"), \"Buchanan County\",\n                    ifelse(str_detect(NAME, \"Chickasaw\"), \"Chickasaw County\",\n                      ifelse(str_detect(NAME, \"Grundy\"), \"Grundy County\", \"Story County\"))))\n\n\nplot_1 <- transport_small %>%\n  ggplot(aes(fill = variable, x = county, y = estimate)) +\n  geom_bar(stat = \"identity\", position = \"fill\") +\n  coord_flip() + \n  ggtitle(\"Mode of Transport to Work\")\n\nplot_2 <- transport_small %>%\n  filter(variable != \"Automobile\") %>%\n  ggplot(aes(fill = variable, x = county, y = estimate)) +\n  geom_bar(stat = \"identity\", position = \"fill\") +\n  coord_flip() +\n  ggtitle(\"Mode of Transport to Work (Other than Automobile)\")\n\nplot_1\n\n\n\n\nThis is a plot of the reported mode of transport to work for each of the 4 counties. Commute by automobile overwhelmingly predominates.\n\nplot_2\n\n\n\n\nThis is a plot of the reported mode of transport for each county with automobile excluded. In two of the counties, “walking” is the majority response.\n\n\nI learned a lot by exploring this data, both about the census data itself and about different means of data wrangling in R. One of the biggest takeaways for me was being introduced to the “stringr” package and learning how to detect key words in strings. Along with that, I feel I have a clearer understanding of the “ifelse()” function and how it works. I also remembered how to add error bars to plots and how to make maps given the presence of the appropriate data. I’m looking forward to exploring these data sets even more and hope they will prove to be useful for our project."
  }
]